<!DOCTYPE html>
<html class="no-js" lang='en'>
  <head>
    <meta charset=UTF-8>
    <title>stdout - coding and technology</title>
    <!-- Hey you! Viewing the source on my blog? Ahead may lie gross dragons..
         Anyway, it's dangerous to go alone,  take this!

               $_______________________________$$$$$
               $$$__________________________$$$$$$$
               $$$_$$____________________$$$$__$$$
               _$$___$$________________$$$$____$$
               __$____$$_____$$$$$$$$$$$$_____$$
               ___$$____$$$$$$$_____$$$_____$$$
               ____$$___$_________________$$$
               _____$$$__________________$$_____$$$$
               ______$$____________$$$$__$$$$$$$$__$$
               ______$__$$$$_______$$$$____$$______$$
               _$$$$$$__$$$$__$$____$$______$____$$$
               $$____$___$$____________$$$__$___$$$
               _$$$__$______$$$$$$____$___$_$$$$$
               ___$$$$_______$$__$_____$$$__$$$$$$$
               _____$$$$______$$$$_________$______$$
               _______$$$$______________$$________$$$$
               ______$$__$$$___$$$$$$_____________$$$$
               _____$$$_________________$$$$_____$$$$
               ____$$$$$______$$$$$$$$$$$$$$$$$$$$$
               ______$$$$$$_$$$$$$____________$$$
               __________$$$$
     -->

    <!-- Foundation stylesheets and modernizr -->
    <link rel="stylesheet" type="text/css"
          href="/css/normalize.css"/>
    <link rel="stylesheet" type="text/css"
          href="/css/foundation.css"/>

    <!-- Pygments for syntax highlighting -->
    <link rel="stylesheet" type="text/css"
          href="/css/pygments.css"/>

    <!-- Custom styles -->
    <link rel="stylesheet" type="text/css"
          href="/css/custom.css"/>
  </head>

  <!-- Gaug.es -->
  <script type="text/javascript">
    var _gauges = _gauges || [];
    (function() {
      var t   = document.createElement('script');
      t.type  = 'text/javascript';
      t.async = true;
      t.id    = 'gauges-tracker';
      t.setAttribute('data-site-id', '50a7f3f6f5a1f51a1d000050');
      t.setAttribute('data-track-path', 'https://track.gaug.es/track.gif');
      t.src = 'https://d36ee2fcip1434.cloudfront.net/track.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(t, s);
    })();
  </script>
  <!-- end Gaug.es -->

  <body>

    <!-- Top Bar -->
    <ul class="vertical medium-horizontal menu">
      <li class="menu-text">stdout</li>
      <li>
        <a href="/index.html">Home</a>
      </li>
      <li>
        <a href="/posts.html">Posts</a>
      </li>
      <li>
        <a href="/projects.html">Projects</a>
      </li>
      <li>
        <a href="/about.html">About</a>
      </li>
    </ul>
    <!-- End top bar -->

    <!-- Rest of site -->
<!-- old nav structure
    <div class="top-bar">
      <div class="top-bar-left">
        <ul class="menu">
          <li class="menu-text">stdout</li>
          <li>
              <a id="home" href="/index.html">
                <span>&#8962;</span>
                <label>Home</label>
              </a>
            </li>
            <li>
              <a id="posts" href="/posts.html">
                <span>&#9776;</span>
                <label>Archive</label>
              </a>
            </li>
            <li>
              <a id="projects" href="/projects.html">
                <span>&#9000;</span>
                <label>Projects</label>
              </a>
            </li>
            <li>
              <a id="about" href="/about.html">
                <span>&#128100;</span>
                <label>About</label>
              </a>
            </li>
          </ul>
        </div>
      </div>  --><!-- end navbg -->

    <div id="main">
      <div id="wrapper">
        <div id="titlebg">
          <div class="row">
            <!-- Title -->
            <div id="title" class="columns small-12">
              <h1><span id="stdout">stdout</span>Coding and Technology</h1>
            </div>
          </div>
        </div>

        <!-- Content -->
        <div class="row">
          <div id="content" class="columns small-centered small-12 large-9">
            <div class="post">
  <!-- Post header -->
  <div class="row">
    <div class="columns small-12 large-uncentered large-10">
      <a href="/software/2011/05/16/dwarves-and-archlinux.html">
        <h1 class="post-title">Dwarves and (Arch)Linux</h1>
      </a>
    </div>
    <div class="columns small-6 large-uncentered large-2">
      <a href="http://facebook.com/sharer.php?u=http://www.bpace.info/software/2011/05/16/dwarves-and-archlinux.html">
        <span class="entypo-social right">&#62222;</span>
      </a>
      <a href="https://plus.google.com/share?url=http://www.bpace.info/software/2011/05/16/dwarves-and-archlinux.html">
        <span class="entypo-social right">&#62223;</span>
      </a>
      <a href="http://twitter.com/share?text=Dwarves+and+%28Arch%29Linux&url=http://www.bpace.info/software/2011/05/16/dwarves-and-archlinux.html">
        <span class="entypo-social right">&#62217;</span>
      </a>
    </div>
    <div class="row">
      <div class="columns small-6 medium-6 large-centered post-date">
        May 16, 2011
      </div>
    </div>
  </div>
  <br>
  <!-- Post content -->
  <div class="row">
    <div class="columns small-12 post-content"><p><em>Most of this article is 5 years out of date, and probably of no use</em></p>

<p>I’m a pretty avid linux user, and I try to minimize the time I spend in Windows,
even for a game as <a href="http://df.magmawiki.com/index.php/DF2010:Losing">fun </a>as
Dwarf Fortress. I was very happy to hear that there are linux packages available
for the game now, as that wasn’t always the case. If anyone reading this hasn’t
  yet played Dwarf Fortress, I implore you to grab the game from their <a href="http://www.bay12games.com/dwarves/">main
  site</a> and <a href="http://df.magmawiki.com/index.php/40d:Your_first_fortress">follow
  along</a>.</p>

<p>Unfortunately, the in game GUI for managing dwarf tasks is, to put it softly,
abysmal once you’ve got a decent sized fortress. That’s where Dwarf Therapist
comes in, which is a great third party dwarf management tool. If you’re on a
debian-based distro, they offer <a href="http://code.google.com/p/dwarftherapist/wiki/LinuxVersion">debian
packages</a> which makes
installation trivial.</p>

<p>However, ArchLinux users aren’t so fortunate in terms of an easy installation,
as Dwarf Therapist must be compiled. However, this is actually a benefit, as the
current version of DT also has a very annoying bug in which custom professions
do not work. What follows is a guide to compile DT for ArchLinux, and in the
  process apply a patch during the build that fixes the custom profession bug.</p>

<p>An <a href="https://wiki.archlinux.org/index.php/AUR">Arch User Repository (AUR)</a>
package for Dwarf Therapist exists, which makes compilation of the package very
simple. I’ll go step by step for anyone who hasn’t compiled a package using the
<a href="https://wiki.archlinux.org/index.php/Arch_Build_System">Arch Build System
(ABS)</a> before, but if
you’re not even sure what these things are, I strongly recommending reading the
two wiki pages I’ve linked. Follow the ABS guide if you don’t have it already
installed on your system.</p>

<p>Navigate to your ABS tree, creating some extra folders for AUR packages.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ cd /var/abs
$ mkdir -p local/aur &amp;&amp; cd local/aur
</code></pre>
</div>

<p>The AUR package for Dwarf Therapist is located <s>here</s> (It is
  now out of date, as is most of this article)
<!--[here](https://aur.archlinux.org/packages.php?ID=38062)-->. Now we’ll copy the link
location of the “Tarball” link on that page, pull it to our local system,
extract it and delete the archive.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ wget https://aur.archlinux.org/packages/dwarftherapist-hg/dwarftherapist-hg.tar.gz
$ tar -xzvf dwarftherapist-hg.tar.gz
$ rm dwarftherapist-hg.tar.gz
$ cd dwarftherapist-hg
</code></pre>
</div>

<p>Currently there’s an <a href="http://code.google.com/p/dwarftherapist/issues/detail?id=175">open
issue</a> in the
ticket tracker for Dwarf Therapist. Download linux-nickname.hg and place it in
/var/abs/local/aur/dwarftherapist-hg/. Edit the PKGBUILD file, and locate line
40, which should read:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>hg checkout 9ac1306c2abd
</code></pre>
</div>

<p>Add these two lines directly after that line.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>hg unbundle ../../linux-nickname.hg
hg update
</code></pre>
</div>

<p>All that’s left then is to build the package and install it.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ makepkg -s
sudo pacman -U dwarftherapist-hg-0.6.10-2-i686.pkg.tar.xz
</code></pre>
</div>

<p>If both steps succeeded, go ahead and try to run your freshly patched and
compiled copy of Dwarf Therapist.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$ dwarftherapist &amp;
</code></pre>
</div>

<p>If all has gone well, you should see dwarf fortress launch and probably complain
that you don’t have an instance of Dwarf Fortress running. Success!</p>
</div>
  </div>
</div>
<br>

          </div>
        </div>
        <div class="adunit_small">
  <script type="text/javascript"><!--
  google_ad_client = "ca-pub-9231989683269805";
  /* sm_banner */
  google_ad_slot = "3508818774";
  google_ad_width = 320;
  google_ad_height = 50;
  //-->
  </script>
  <script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
  </script>
</div>

      </div>
    </div>

    <footer id="footer">
      <div class="show-for-large-up" id="quote">
        <a href="http://www.catb.org/~esr/writings/unix-koans/">
        There is more Unix-nature in one line of shell script than there is in
        ten thousand lines of C.
      </a>
      </div>
      <div class="row">
        <div id="footernav" class="columns small-6">
          <a href="https://www.github.com/pacebl">
            <span class="entypo-social">&#62208;</span>
            <label>Github</label>
          </a>
          <a href="https://www.twitter.com/bl_pace">
            <span class="entypo-social">&#62217;</span>
            <label>Twitter</label>
          </a>
        </div>
        <span id="entypo-attribution" class="columns small-6">
          <a href="http://www.entypo.com">Entypo pictograms by Daniel Bruce</a>
        </span>
      </div>
    </footer>



    <!-- Foundation JS -->
    <script src="/js/vendor/jquery.js"></script>
    <script src="/js/vendor/foundation.min.js"></script>

    <script>
      $(document).foundation();
    </script>
    <!-- End Foundation JS -->
  </body>
</html>
